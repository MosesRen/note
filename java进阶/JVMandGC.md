# JVM 垃圾回收

## 垃圾回收的判断算法

引用计数法和可达性分析
GCroots对象

## 垃圾分代

新生代
eden区和survivor1区
将eden区复制到S1区，若不够则存放到老年代，如满了 则出发fullgc

老年代

## 收集算法

- 标记清除 效率碎片问题
- 复制算法 容量保证问题
- 标记整理 标记+复制
- 分代整理  新生代复制算法 老年代 标记清除/整理算法

CMS+ParNew
ParNew 多线程 新生代垃圾收集器，并行
CMS 老年代垃圾回收 标记清除

**CMS**

- 初始标记
- 并发标记（其他线程并行）
- 并发预清理
- 重新标记（多线程并行）
- 并发清理（其他线程并行）（耗时最久）（系统停顿）
- 并发重置（其他线程并行）

finilize() 拯救对象，只触发一次

**G1**
内存分成小的region 每个reion有各自的分代属性，大小一致
分代不连续，搜索引用时要全盘扫描